## CheckData
Набор пользвательских функций для проверки правильности введенных данных

### [Luhn](Luhn.crf)
Пользовательская функция для проверки значения алгоритмом [Луна](https://ru.wikipedia.org/wiki/Алгоритм_Луна).
Используетс функцией [CheckPayCard](CheckPayCard.crf) для проверки корректности номеров банковских карт.
```
$Luhn(@value)
```
**Параметры**

`@value` - значение для проверки (строка из цифр)

**Возвращаемое значение**

Возвращает `1`, если значение успешно прошло проверку, и `0` в противном случае.

### [CheckSNILS](CheckSNILS.crf)
Проверка корректности контрольной суммы страхового номера индивидуального лицевого счета (Россия).
```
$CheckSNILS(@value)
```
**Параметры**

`@value` - значение для проверки (строка из 11 цифр)

**Возвращаемое значение**

Возвращает `1`, если значение успешно прошло проверку, и `0` в противном случае.


### [CheckINN](CheckINN.crf)
Проверка корректности контрольной суммы идентификационного номера налогоплательщика (Россия).
```
$CheckINN(@value)
```
**Параметры**

`@value` - значение для проверки (строка из 10 или 12 цифр)

**Возвращаемое значение**

Возвращает `1`, если значение успешно прошло проверку, и `0` в противном случае.

### [Surname](Surname.crf)
Проверка корректности ввода фамилии в русском написании: 
- в значении допускаются символы кириллицы, дефис, пробел;
- вводимое значение должно начинаться и заканчиваться буквой;

Формула также корректирует значение, устраняя некоторые типичные опечатки:
двойные пробелы и дефисы, а также дефисы, отбитые от слов пробелами.

```
$Surname(@name)
```
**Параметры**

`@name` - значение для проверки

**Возвращаемое значение**

Возвращает откорректированное значение. Если выявлена ошибка, вторым значением возвращается соответствующе сообщение.

`$Surname("Бендер - Задунайский")` вернет "Бендер-Задунайский"

`$Surname("Фон--Нейман")` вернет "Фон-Нейман"

`$Surname("Ivanov")` вернет два значения "Ivanov" и "Значение содержит недопустимые символы"

**Пример использования**  
(в проверочной формуле для поля Фамилия)

```
@ret:=$Surmane(@ret)
```


### [ContactType](ContactType.crf)
Определение типа контактной информации: телефон. web-сайт (страница), E-mail. 

Формула производит частичную коррекцию переданного значения:
- из номеров телефонов удаляются все разделители;
- в web-адресах символ дроби (`/`) заменяется на обратный слеш (`\`), удаляются параметры запроса.

```
$ContactType(@val)
```
**Параметры**

`@val` - строка, содержащая один элемент контактной информации: номер телефона, адрес сайта и т. п.

**Возвращаемое значение**
Функция возвращает строку, соответствующую распознанному типу переданного значения:
- `PHONE` - значение распознано как номер телефона;
- `EMAIL` - значение является адресом электронной почты;
- `WEB` - значение является адресом web-страницы.

Если значение не было отнесено ни к одному типу, функция вернет пустую строку.

`$ContactType("8-(903)-562-73-00")` - вернет "PHONE" и "89035627300"

`$ContactType("kostya@gmail.com")` - вернет "EMAIL"

`$ContactType("http://www.cronos.ru/cgi-bin/YaBB2/YaBB.cgi")` - вернет "WEB" и "www.cronos.ru\cgi-bin\YaBB2\YaBB.cgi"


### [CheckPayCard](CheckPayCard.crf)
Проверка корректности номера банковской карты и определение платежной системы.
```
$CheckPayCard(@val)
```
**Параметры**

`@val` - строка, содержащая номер банковской карты

**Возвращаемое значение**
Функция возвращает число, соответствующее типу платежной системы:
- `2` - карта "Мир";
- `4` - карта "Visa";
- `5` - карта "MasterCard";
- `0` - другое;
- `-1` - некорректный номер карты.
